/*! metagrid-client - v0.1.0 - 2016-09-07
* Copyright (c) 2016 ; Licensed MIT */
!function(a){var b,c=window.console,d="/",e={init:function(e){return b=a.extend({projectSlug:"",apiUrl:"https://api.metagrid.ch/widget/",includeDescription:!1,entitySlugTransformer:function(a){return a},debug:!1,template:a('<div class="row"><div class="span8"><div class="blue-box"><b>Links <a href="http://metagrid.ch" target="_blank">Metagrid.ch</a>:</b><span id="metagrid-links"></span></div></div></div>'),render:function(c,d){var e=a("<span />");return a.each(c,function(c,d){var f=a("<a>").attr({"class":"metagrid-link",target:"_blank",href:d.url}).text(c);b.includeDescription&&f.attr("title",d.short_description),f.appendTo(e)}),a("#metagrid-links",d).append(e),d}},e),""===b.projectSlug?(a.error("You need to declare a projectSlug for the MetagridClient "),!1):a("#metagrid-links",b.template).length<=0?(a.error("The template needs to define an entry point with id #metagrid-links."),!1):this.each(function(){var e=a(this),f=e.data("element-kind"),g=e.data("element-id"),h=e.data("language");if(null===h&&(h=a("html").attr("lang")),g&&f){"function"==typeof b.entitySlugTransformer&&(f=b.entitySlugTransformer(f));var i=!1;a.getJSON(b.apiUrl+b.projectSlug+d+f+d+g+".json?lang="+h+"&include="+b.includeDescription+"&jsoncallback=?",function(a){if(i=!0,clearTimeout(j),a[0]){b.debug&&c.log(a),e.data("data",a[0]);var d=b.render(a[0],b.template.clone());e.append(d)}else b.debug&&c.log("metagrid-client: No concordance for the resource found")});var j=setTimeout(function(){!i&&b.debug&&c.log("metagrid-client: No concordance for the resource found or a error in the communication with the server")},5e3)}})},getData:function(){return a(this).data("data")}};a.fn.metagridClient=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.metagridclient"):e.init.apply(this,arguments)}}(jQuery);