/*! metagrid-client - v0.1.0 - 2021-02-02
* Copyright (c) 2021 ; Licensed MIT */

!function(o){var l,c=window.console,t={init:function(e){return""===(l=o.extend({projectSlug:"",apiUrl:"https://api.metagrid.ch/widget/",includeDescription:!1,entitySlugTransformer:function(e){return e},debug:!1,template:o('<div class="row"><div class="span8"><div class="blue-box"><b>Links <a href="http://metagrid.ch" target="_blank">Metagrid.ch</a>:</b><span id="metagrid-links"></span></div></div></div>'),render:function(a,e){var i=o("<span />");return o.each(a,function(e,t){var n;n="object"==typeof a&&a.url?a.url:t;var r=o("<a>").attr({class:"metagrid-link",target:"_blank",href:n}).text(e);l.includeDescription&&r.attr("title",t.short_description),r.appendTo(i)}),o("#metagrid-links",e).append(i),e}},e)).projectSlug?(o.error("You need to declare a projectSlug for the MetagridClient "),!1):this.each(function(){var n=o(this),e=n.data("element-kind"),t=n.data("element-id"),r=n.data("language");if(null==r&&(r=o("html").attr("lang")||"de"),t&&e){"function"==typeof l.entitySlugTransformer&&(e=l.entitySlugTransformer(e));var a=!1,i=null;o.getJSON(l.apiUrl+l.projectSlug+"/"+e+"/"+t+".json?lang="+r+"&include="+l.includeDescription+"&jsoncallback=?",function(e){if(a=!0,clearTimeout(i),e[0]){l.debug&&c.log(e),n.data("data",e[0]);var t=l.render(e[0],l.template.clone());n.append(t)}else l.debug&&c.log("metagrid-client: No concordance for the resource found")}),i=setTimeout(function(){!a&&l.debug&&c.log("metagrid-client: No concordance for the resource found or a error in the communication with the server")},5e3)}})},getData:function(){return o(this).data("data")}};o.fn.metagridClient=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void o.error("Method "+e+" does not exist on jQuery.metagridclient"):t.init.apply(this,arguments)}}(jQuery);